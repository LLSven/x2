# 此文件
此文件对x2的文件系统作说明，同时引用和参照其他文件系统

# Boot sector（维基百科）
boot sector指的是用于将存储器上的操作系统加载到内存的扇区
在兼容IBM PC的计算机上，BIOS会选择一个存储器，加载其中
的MBR、VBR或者其他可执行的代码到物理地址0x7c00处

在其他系统上，这个过程可能不相同

# MBR
MBR指的是已分区的存储器上的第一个扇区，MBR通常用于载入VBR
该扇区的末尾两个字节顺序是 0x55 0xAA,这叫做启动标识，BIOS会检测一个扇区
是否具有启动标识来判断是否应当载入。

MBR的概念是1983年PC DOS 2.0发布时产生的。
MBR通常也叫做boot loader，即启动载入器。
由于MBR的设计，导致一个存储器能够访问有2TB的空间；为此，GPT产生以替代这种
方案。

关于MBR的分区内容，分为旧式和新式两种，参见https://en.wikipedia.org/wiki/Master_boot_record

# MBR分区表项
0  1字节		该字节的第7位表示bootable(active)与否，所有该字节只有两种取值
				0x80或者0x00
1  3字节		CHS起始地址
4	1字节	分区类型，或者分区ID，代表了某种文件系统。 注意，该值只能决定
			主类型，要确定具体的文件系统，还需要其他分区的信息。比如0x7可能
			是NTFS和exFAT， 81可能是MINIX文件系统,82h可能是Linux Swap分区
5	3字节	CHS结束地址（最高可访问的地址）
8	4字节	LBA起始地址
C	4字节	扇区数目（从起始地址处连续）


# VBR
VBR指的是未分区存储器上的第一个扇区，或者是一个单独分区的第一个扇区
VBR存在于分区的第一个扇区，也叫做分区引导记录

由于该分区也可能被BIOS加载，所以其扇区末尾应当由0x55 0xaa.
VBR如果被加载，也是存放到0x7c00处

# x2加载综述
BIOS加载mbr扇区，mbr扇区加载激活的vbr扇区（该分区的文件系统类型为x2内置的类型），
基于一个合理的假设：通常二级加载器的体积不会太大
所以该文件系统可配置为是否含有二级加载器，如果有，该文件系统需要预留位置给该二级加载器

二级加载器位于文件系统meta信息区域的末端，加载后可以直接跳转

由于该文件系统预留了两个扇区，所以可从该分区的第三个扇区开始加载所有需要的区域，然后跳转到开始处。

[vbr][预留][][][][][引导区][数据区...]

引导区包括了所有二级加载器的代码，全部是16位的。

包含一个X2fsUtil结构，一个Console结构，除此之外没有其他多余的代码。
X2fsUtil用于操作文件系统，Console结构用于处理用户输入